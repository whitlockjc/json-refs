(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.JsonRefs = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (global){
"use strict";function getRemoteJson(e,r){var n=remoteCache[e],t=Promise.resolve(),i=-1===e.indexOf(":")?void 0:e.split(":")[0];return _.isUndefined(n)?-1!==supportedSchemes.indexOf(i)||_.isUndefined(i)?(t=pathLoader.load(e,r),t=r.processContent?t.then(function(n){return r.processContent(n,e)}):t.then(JSON.parse),t.then(function(r){return remoteCache[e]=r,r})):t=t.then(function(){return Promise.reject(new Error("Unsupported remote reference scheme: "+i))}):t=t.then(function(){return n}),t}function combineRefs(e,r){var n=pathFromPointer(e);return isRemotePointer(r)&&(r=-1===r.indexOf("#")?"#":r.substring(r.indexOf("#"))),pathToPointer(n.concat(pathFromPointer(r))).replace(/\/\$ref/g,"")}function computeUrl(e,r){function n(e){".."===e?i.pop():"."!==e&&i.push(e)}var t="#"!==r.charAt(0)&&-1===r.indexOf(":"),i=[],o=(r.indexOf("#")>-1?r.split("#")[0]:r).split("/");return e&&e.length>1&&"/"===e[e.length-1]&&(e=e.substring(0,e.length-1)),e&&e.split("#")[0].split("/").forEach(n),t?o.forEach(n):i=o,i.join("/")}function realResolveRefs(e,r,n){function t(e){var r=e.slice(0,e.lastIndexOf("allOf")),i=n[pathToPointer(r)];return _.isUndefined(i)?r.indexOf("allOf")>-1?t(r):void 0:pathToPointer(r)}function i(e){var r=[],i=e.map(function(){var e,i=pathToPointer(this.path),o=n[i];if(this.circular){if(r.push(i),_.isUndefined(o)&&(e=t(this.path),o=n[e]),_.isUndefined(o))throw new Error("Unable to find reference leading to circular composition: "+i);o.circular=!0,0===s?this.update({}):this.update(traverse(this.node).map(function(){this.circular&&this.parent.update({})}))}});return _.each(r,function(e){var r,n=[],t=pathFromPointer(e),o=traverse(i).get(t);for(r=0;s>r;r++)n.push.apply(n,t),traverse(i).set(n,_.cloneDeep(o))}),i}function o(e,r){var t=combineRefs(r,"#"),i=e=-1===e.indexOf("#")?"#":e.substring(e.indexOf("#")),o=pathFromPointer(i),s=!a.has(o),f=a.get(o),u=pathFromPointer(r),c=u.slice(0,u.length-1),d=n[t]||{ref:e};s?d.missing=!0:0===c.length?(a.value===f&&(f={},d.circular=!0),a.value=f):(a.get(c)===f&&(f={},d.circular=!0),a.set(c,f)),n[t]=d}var s=_.isUndefined(r.depth)?1:r.depth,a=traverse(e);return _.each(findRefs(e),function(e,r){isRemotePointer(e)||o(e,r)}),_.isUndefined(r.location)||_.each(n,function(e){var n=e.ref;n=n.replace(r.location,""),"/"===n.charAt(0)&&(n=n.substring(1)),e.ref=n}),{metadata:n,resolved:i(a)}}function resolveRemoteRefs(e,r,n,t,i){function o(e,r,o,s,a){var u,c=o+("#"===s?"":s),d=combineRefs(n,e),p=i[d]||{},h=pathFromPointer(e);_.isUndefined(a)?(p.circular=!0,u=t[o].ref):(u=traverse(a).get(pathFromPointer(s)),u.$ref?u=u.$ref:h.pop()),0===h.length?f.value=u:f.set(h,u),p.ref=c,i[d]=p}function s(){return{metadata:i,resolved:f.value}}var a=Promise.resolve(),f=traverse(e);return _.each(findRefs(e),function(e,s){isRemotePointer(e)&&(a=a.then(function(){var a=computeUrl(r.location,e),f=e.split("#"),u="#"+(f[1]||"");return _.isUndefined(t[a])?getRemoteJson(a,r).then(function(e){return e},function(e){return e}).then(function(c){var d=f[0],p=_.cloneDeep(r),h=combineRefs(n,s);return d=d.substring(0,d.lastIndexOf("/")+1),p.location=computeUrl(r.location,d),t[a]={ref:n},_.isError(c)?void(i[h]={err:c,missing:!0,ref:e}):resolveRemoteRefs(c,p,h,t,i).then(function(r){delete t[a],o(s,e,a,u,r.resolved)})}):void o(s,e,a,u)}))}),a=a.then(s,s)}"undefined"==typeof Promise&&require("native-promise-only");var _=require("./lib/utils"),pathLoader="undefined"!=typeof window?window.PathLoader:"undefined"!=typeof global?global.PathLoader:null,traverse="undefined"!=typeof window?window.traverse:"undefined"!=typeof global?global.traverse:null,remoteCache={},supportedSchemes=["file","http","https"];module.exports.clearCache=function(){remoteCache={}};var isJsonReference=module.exports.isJsonReference=function(e){return _.isPlainObject(e)&&_.isString(e.$ref)},pathToPointer=module.exports.pathToPointer=function(e){if(_.isUndefined(e))throw new Error("path is required");if(!_.isArray(e))throw new Error("path must be an array");var r="#";return e.length>0&&(r+="/"+e.map(function(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")),r},findRefs=module.exports.findRefs=function(e){if(_.isUndefined(e))throw new Error("json is required");if(!_.isPlainObject(e))throw new Error("json must be an object");return traverse(e).reduce(function(e){var r=this.node;return"$ref"===this.key&&isJsonReference(this.parent.node)&&(e[pathToPointer(this.path)]=r),e},{})},isRemotePointer=module.exports.isRemotePointer=function(e){if(_.isUndefined(e))throw new Error("ptr is required");if(!_.isString(e))throw new Error("ptr must be a string");return""!==e&&"#"!==e.charAt(0)},pathFromPointer=module.exports.pathFromPointer=function(e){if(_.isUndefined(e))throw new Error("ptr is required");if(!_.isString(e))throw new Error("ptr must be a string");var r=[],n=["","#","#/"];return isRemotePointer(e)?r=e:-1===n.indexOf(e)&&"#"===e.charAt(0)&&(r=e.substring(e.indexOf("/")).split("/").reduce(function(e,r){return""!==r&&e.push(r.replace(/~0/g,"~").replace(/~1/g,"/")),e},[])),r};module.exports.resolveRefs=function(e,r,n){var t=Promise.resolve();return 2===arguments.length&&_.isFunction(r)&&(n=r,r={}),_.isUndefined(r)&&(r={}),t=t.then(function(){if(_.isUndefined(e))throw new Error("json is required");if(!_.isPlainObject(e))throw new Error("json must be an object");if(!_.isPlainObject(r))throw new Error("options must be an object");if(!_.isUndefined(n)&&!_.isFunction(n))throw new Error("done must be a function");if(!_.isUndefined(r.processContent)&&!_.isFunction(r.processContent))throw new Error("options.processContent must be a function");if(!_.isUndefined(r.prepareRequest)&&!_.isFunction(r.prepareRequest))throw new Error("options.prepareRequest must be a function");if(!_.isUndefined(r.location)&&!_.isString(r.location))throw new Error("options.location must be a string");if(!_.isUndefined(r.depth)&&!_.isNumber(r.depth))throw new Error("options.depth must be a number");if(!_.isUndefined(r.depth)&&r.depth<0)throw new Error("options.depth must be greater or equal to zero")}),e=traverse(e).clone(),r=traverse(r).clone(),t=t.then(function(){return resolveRemoteRefs(e,r,"#",{},{})}).then(function(e){return realResolveRefs(e.resolved,r,e.metadata)}),!_.isUndefined(n)&&_.isFunction(n)&&(t=t.then(function(e){n(void 0,e.resolved,e.metadata)},function(e){n(e)})),t};
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./lib/utils":2,"native-promise-only":3}],2:[function(require,module,exports){
(function (global){
"use strict";function isType(e,r){return Object.prototype.toString.call(e)==="[object "+r+"]"}var traverse="undefined"!=typeof window?window.traverse:"undefined"!=typeof global?global.traverse:null;module.exports.cloneDeep=function(e){return traverse(e).clone()};var isArray=module.exports.isArray=function(e){return isType(e,"Array")};module.exports.isError=function(e){return isType(e,"Error")},module.exports.isFunction=function(e){return isType(e,"Function")},module.exports.isNumber=function(e){return isType(e,"Number")};var isPlainObject=module.exports.isPlainObject=function(e){return isType(e,"Object")};module.exports.isString=function(e){return isType(e,"String")},module.exports.isUndefined=function(e){return"undefined"==typeof e},module.exports.each=function(e,r){isArray(e)?e.forEach(r):isPlainObject(e)&&Object.keys(e).forEach(function(n){r(e[n],n)})};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],3:[function(require,module,exports){
(function (global){
!function(t,n,e){n[t]=n[t]||e(),"undefined"!=typeof module&&module.exports?module.exports=n[t]:"function"==typeof define&&define.amd&&define(function(){return n[t]})}("Promise","undefined"!=typeof global?global:this,function(){"use strict";function t(t,n){l.add(t,n),h||(h=y(l.drain))}function n(t){var n,e=typeof t;return null==t||"object"!=e&&"function"!=e||(n=t.then),"function"==typeof n?n:!1}function e(){for(var t=0;t<this.chain.length;t++)o(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function o(t,e,o){var r,i;try{e===!1?o.reject(t.msg):(r=e===!0?t.msg:e.call(void 0,t.msg),r===o.promise?o.reject(TypeError("Promise-chain cycle")):(i=n(r))?i.call(r,o.resolve,o.reject):o.resolve(r))}catch(c){o.reject(c)}}function r(o){var c,u=this;if(!u.triggered){u.triggered=!0,u.def&&(u=u.def);try{(c=n(o))?t(function(){var t=new f(u);try{c.call(o,function(){r.apply(t,arguments)},function(){i.apply(t,arguments)})}catch(n){i.call(t,n)}}):(u.msg=o,u.state=1,u.chain.length>0&&t(e,u))}catch(a){i.call(new f(u),a)}}}function i(n){var o=this;o.triggered||(o.triggered=!0,o.def&&(o=o.def),o.msg=n,o.state=2,o.chain.length>0&&t(e,o))}function c(t,n,e,o){for(var r=0;r<n.length;r++)!function(r){t.resolve(n[r]).then(function(t){e(r,t)},o)}(r)}function f(t){this.def=t,this.triggered=!1}function u(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function a(n){if("function"!=typeof n)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var o=new u(this);this.then=function(n,r){var i={success:"function"==typeof n?n:!0,failure:"function"==typeof r?r:!1};return i.promise=new this.constructor(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");i.resolve=t,i.reject=n}),o.chain.push(i),0!==o.state&&t(e,o),i.promise},this["catch"]=function(t){return this.then(void 0,t)};try{n.call(void 0,function(t){r.call(o,t)},function(t){i.call(o,t)})}catch(c){i.call(o,c)}}var s,h,l,p=Object.prototype.toString,y="undefined"!=typeof setImmediate?function(t){return setImmediate(t)}:setTimeout;try{Object.defineProperty({},"x",{}),s=function(t,n,e,o){return Object.defineProperty(t,n,{value:e,writable:!0,configurable:o!==!1})}}catch(d){s=function(t,n,e){return t[n]=e,t}}l=function(){function t(t,n){this.fn=t,this.self=n,this.next=void 0}var n,e,o;return{add:function(r,i){o=new t(r,i),e?e.next=o:n=o,e=o,o=void 0},drain:function(){var t=n;for(n=e=h=void 0;t;)t.fn.call(t.self),t=t.next}}}();var g=s({},"constructor",a,!1);return a.prototype=g,s(g,"__NPO__",0,!1),s(a,"resolve",function(t){var n=this;return t&&"object"==typeof t&&1===t.__NPO__?t:new n(function(n,e){if("function"!=typeof n||"function"!=typeof e)throw TypeError("Not a function");n(t)})}),s(a,"reject",function(t){return new this(function(n,e){if("function"!=typeof n||"function"!=typeof e)throw TypeError("Not a function");e(t)})}),s(a,"all",function(t){var n=this;return"[object Array]"!=p.call(t)?n.reject(TypeError("Not an array")):0===t.length?n.resolve([]):new n(function(e,o){if("function"!=typeof e||"function"!=typeof o)throw TypeError("Not a function");var r=t.length,i=Array(r),f=0;c(n,t,function(t,n){i[t]=n,++f===r&&e(i)},o)})}),s(a,"race",function(t){var n=this;return"[object Array]"!=p.call(t)?n.reject(TypeError("Not an array")):new n(function(e,o){if("function"!=typeof e||"function"!=typeof o)throw TypeError("Not a function");c(n,t,function(t,n){e(n)},o)})}),a});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}]},{},[1])(1)
});